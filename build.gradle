buildscript {
    repositories {
        maven { url 'https://artifactory.int.avast.com/artifactory/maven' }
    }

    dependencies {
        classpath 'com.avast.gradle:gradle-publish:0.16.1'
        classpath 'com.avast.gradle:gradle-release:0.16.1'
        classpath 'com.avast.gradle:gradle-scala:0.16.1'
        classpath 'com.avast.gradle:docker-compose-gradle-plugin:0.4.2'
        classpath 'com.github.maiflai:gradle-scalatest:0.15'
        classpath 'com.github.ben-manes:gradle-versions-plugin:0.15.0'
    }
}

apply plugin: 'avast-release'
apply plugin: 'idea'
apply plugin: 'docker-compose'

subprojects {
    apply plugin: 'java'
    apply plugin: 'avast-publish'
    apply plugin: 'avast-scala'
    apply plugin: 'com.github.maiflai.scalatest'
    apply plugin: 'com.github.ben-manes.versions'

    sourceCompatibility = '1.8'
    targetCompatibility = '1.8'

    repositories {
        maven { url 'https://artifactory.int.avast.com/artifactory/maven' }
    }

    avast {
        publish {
            groupId = 'com.avast.clients'
        }

        scala {
            version = '2.12'
        }
    }


    ext {
        utilsVersion = "6.0.64"
        metricsVersion = "2.0.0"
        bytesVersion = "2.0.3"
        circeVersion = "0.7.1" // only used in tests!
    }

}

allprojects {
    //noinspection UnnecessaryQualifiedReference
    tasks.withType(org.gradle.api.tasks.scala.ScalaDoc) {
        enabled = false
    }
}
